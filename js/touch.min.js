/*! touchjs.min v0.2.14  2014-08-05 */
;"use strict";!function(a,b){"function"==typeof define&&(define.amd||define.cmd)?define(b):a.touch=b()}(this,function(){function v(){var F="mouseup mousedown mousemove mouseout",G="touchstart touchmove touchend touchcancel",H=w.hasTouch?G:F;H.split(" ").forEach(function(I){document.addEventListener(I,g,!1)})}var w={};w.PCevts={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseout"},w.hasTouch="ontouchstart" in window,w.getType=function(F){return Object.prototype.toString.call(F).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},w.getSelector=function(F){if(F.id){return"#"+F.id}if(F.className){var G=F.className.split(/\s+/);return"."+G.join(".")}return F===document?"body":F.tagName.toLowerCase()},w.matchSelector=function(F,G){return F.webkitMatchesSelector(G)},w.getEventListeners=function(F){return F.listeners},w.getPCevts=function(F){return this.PCevts[F]||F},w.forceReflow=function(){var H="reflowDivBlock",I=document.getElementById(H);I||(I=document.createElement("div"),I.id=H,document.body.appendChild(I));var F=I.parentNode,G=I.nextSibling;F.removeChild(I),F.insertBefore(I,G)},w.simpleClone=function(F){return Object.create(F)},w.getPosOfEvent=function(I){if(this.hasTouch){for(var J=[],F=null,G=0,H=I.touches.length;H>G;G++){F=I.touches[G],J.push({x:F.pageX,y:F.pageY})}return J}return[{x:I.pageX,y:I.pageY}]},w.getDistance=function(H,I){var F=I.x-H.x,G=I.y-H.y;return Math.sqrt(F*F+G*G)},w.getFingers=function(F){return F.touches?F.touches.length:1},w.calScale=function(H,I){if(H.length>=2&&I.length>=2){var F=this.getDistance(H[1],H[0]),G=this.getDistance(I[1],I[0]);return G/F}return 1},w.getAngle=function(F,G){return 180*Math.atan2(G.y-F.y,G.x-F.x)/Math.PI},w.getAngle180=function(G,H){var F=Math.atan(-1*(H.y-G.y)/(H.x-G.x))*(180/Math.PI);return 0>F?F+180:F},w.getDirectionFromAngle=function(G){var H={up:-45>G&&G>-135,down:G>=45&&135>G,left:G>=135||-135>=G,right:G>=-45&&45>=G};for(var F in H){if(H[F]){return F}}return null},w.getXYByElement=function(G){for(var H=0,F=0;G.offsetParent;){H+=G.offsetLeft,F+=G.offsetTop,G=G.offsetParent}return{left:H,top:F}},w.reset=function(){C=D=E=null,h=e=a=b=!1,c=!1,A={},n=!1},w.isTouchMove=function(F){return"touchmove"===F.type||"mousemove"===F.type},w.isTouchEnd=function(F){return"touchend"===F.type||"mouseup"===F.type||"touchcancel"===F.type},w.env=function(){var J={},K=navigator.userAgent,L=K.match(/(Android)[\s\/]+([\d\.]+)/),F=K.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),G=K.match(/(Windows\s+Phone)\s([\d\.]+)/),H=/WebKit\/[\d.]+/i.test(K),I=F?navigator.standalone?H:/Safari/i.test(K)&&!/CriOS/i.test(K)&&!/MQQBrowser/i.test(K):!1;return L&&(J.android=!0,J.version=L[2]),F&&(J.ios=!0,J.version=F[2].replace(/_/g,"."),J.ios7=/^7/.test(J.version),"iPad"===F[1]?J.ipad=!0:"iPhone"===F[1]?(J.iphone=!0,J.iphone5=568==screen.height):"iPod"===F[1]&&(J.ipod=!0)),G&&(J.wp=!0,J.version=G[2],J.wp8=/^8/.test(J.version)),H&&(J.webkit=!0),I&&(J.safari=!0),J}();var x={proxyid:0,proxies:[],trigger:function(J,K,F){F=F||{};var G,H={bubbles:!0,cancelable:!0,detail:F};try{"undefined"!=typeof CustomEvent?(G=new CustomEvent(K,H),J&&J.dispatchEvent(G)):(G=document.createEvent("CustomEvent"),G.initCustomEvent(K,!0,!0,F),J&&J.dispatchEvent(G))}catch(I){console.warn("Touch.js is not supported by environment.")}},bind:function(F,G,H){F.listeners=F.listeners||{},F.listeners[G]?F.listeners[G].push(H):F.listeners[G]=[H];var I=function(L){w.env.ios7&&w.forceReflow(),L.originEvent=L;for(var J in L.detail){"type"!==J&&(L[J]=L.detail[J])}L.startRotate=function(){n=!0};var K=H.call(L.target,L);"undefined"==typeof K||K||(L.stopPropagation(),L.preventDefault())};H.proxy=H.proxy||{},H.proxy[G]?H.proxy[G].push(this.proxyid++):H.proxy[G]=[this.proxyid++],this.proxies.push(I),F.addEventListener&&F.addEventListener(G,I,!1)},unbind:function(I,J,F){if(F){var G=F.proxy[J];G&&G.length&&G.forEach(function(){I.removeEventListener&&I.removeEventListener(J,this.proxies[this.proxyid],!1)})}else{var H=I.listeners[J];H&&H.length&&H.forEach(function(K){I.removeEventListener(J,K,!1)})}},delegate:function(F,G,H,I){var J=function(P){var Q,K;P.originEvent=P;for(var M in P.detail){"type"!==M&&(P[M]=P.detail[M])}P.startRotate=function(){n=!0};var N=w.getSelector(F)+" "+H,O=w.matchSelector(P.target,N),L=w.matchSelector(P.target,N+" "+P.target.nodeName);if(!O&&L){for(w.env.ios7&&w.forceReflow(),Q=P.target;!w.matchSelector(Q,N);){Q=Q.parentNode}K=I.call(P.target,P),"undefined"==typeof K||K||(P.stopPropagation(),P.preventDefault())}else{w.env.ios7&&w.forceReflow(),(O||L)&&(K=I.call(P.target,P),"undefined"==typeof K||K||(P.stopPropagation(),P.preventDefault()))}};I.proxy=I.proxy||{},I.proxy[G]?I.proxy[G].push(this.proxyid++):I.proxy[G]=[this.proxyid++],this.proxies.push(J),F.listeners=F.listeners||{},F.listeners[G]?F.listeners[G].push(J):F.listeners[G]=[J],F.addEventListener&&F.addEventListener(G,J,!1)},undelegate:function(J,K,F,G){if(G){var H=G.proxy[K];H.length&&H.forEach(function(){J.removeEventListener&&J.removeEventListener(K,this.proxies[this.proxyid],!1)})}else{var I=J.listeners[K];I.forEach(function(L){J.removeEventListener(K,L,!1)})}}},y={tap:!0,doubleTap:!0,tapMaxDistance:10,hold:!0,tapTime:200,holdTime:650,maxDoubleTapInterval:300,swipe:!0,swipeTime:300,swipeMinDistance:18,swipeFactor:5,drag:!0,pinch:!0,minScaleRate:0,minRotationAngle:0},z={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",CLICK:"click",PINCH_START:"pinchstart",PINCH_END:"pinchend",PINCH:"pinch",PINCH_IN:"pinchin",PINCH_OUT:"pinchout",ROTATION_LEFT:"rotateleft",ROTATION_RIGHT:"rotateright",ROTATION:"rotate",SWIPE_START:"swipestart",SWIPING:"swiping",SWIPE_END:"swipeend",SWIPE_LEFT:"swipeLeft",SWIPE_RIGHT:"swipeRight",SWIPE_UP:"swipeUp",SWIPE_DOWN:"swipeDown",SWIPE:"swipe",DRAG:"drag",DRAGSTART:"dragstart",DRAGEND:"dragend",HOLD:"hold",TAP:"tap",DOUBLE_TAP:"doubletap"},A={start:null,move:null,end:null},B=0,C=null,D=null,E=null,a=!1,b=!1,c=!1,d={},e=!1,f=null,h=!1,j=null,l=1,n=!1,p=[],q=0,r=0,s=0,t=null,u={getAngleDiff:function(F){for(var G=parseInt(q-w.getAngle180(F[0],F[1]),10),H=0;Math.abs(G-r)>90&&H++<50;){0>r?G-=180:G+=180}return r=parseInt(G,10)},pinch:function(F){var G=F.target;if(y.pinch){if(!e){return}if(w.getFingers(F)<2&&!w.isTouchEnd(F)){return}var H=w.calScale(A.start,A.move),I=this.getAngleDiff(A.move),J={type:"",originEvent:F,scale:H,rotation:I,direction:I>0?"right":"left",fingersCount:w.getFingers(F)};if(b?w.isTouchMove(F)?(J.fingerStatus="move",x.trigger(G,z.PINCH,J)):w.isTouchEnd(F)&&(J.fingerStatus="end",x.trigger(G,z.PINCH_END,J),w.reset()):(b=!0,J.fingerStatus="start",x.trigger(G,z.PINCH_START,J)),Math.abs(1-H)>y.minScaleRate){var K=w.simpleClone(J),L=1e-11;H>l?(l=H-L,x.trigger(G,z.PINCH_OUT,K,!1)):l>H&&(l=H+L,x.trigger(G,z.PINCH_IN,K,!1)),w.isTouchEnd(F)&&(l=1)}if(Math.abs(I)>y.minRotationAngle){var M,N=w.simpleClone(J);M=I>0?z.ROTATION_RIGHT:z.ROTATION_LEFT,x.trigger(G,M,N,!1),x.trigger(G,z.ROTATION,J)}}},rotateSingleFinger:function(G){var L=G.target;if(n&&w.getFingers(G)<2){if(!A.move){return}if(p.length<2){var F=w.getXYByElement(L);p=[{x:F.left+L.offsetWidth/2,y:F.top+L.offsetHeight/2},A.move[0]],q=parseInt(w.getAngle180(p[0],p[1]),10)}var H=[p[0],A.move[0]],I=this.getAngleDiff(H),J={type:"",originEvent:G,rotation:I,direction:I>0?"right":"left",fingersCount:w.getFingers(G)};w.isTouchMove(G)?J.fingerStatus="move":(w.isTouchEnd(G)||"mouseout"===G.type)&&(J.fingerStatus="end",x.trigger(L,z.PINCH_END,J),w.reset());var K=I>0?z.ROTATION_RIGHT:z.ROTATION_LEFT;x.trigger(L,K,J),x.trigger(L,z.ROTATION,J)}},swipe:function(H){var I=H.target;if(e&&A.move&&!(w.getFingers(H)>1)){var J=Date.now(),K=J-B,L=w.getDistance(A.start[0],A.move[0]),M={x:A.move[0].x-d.left,y:A.move[0].y-d.top},N=w.getAngle(A.start[0],A.move[0]),O=w.getDirectionFromAngle(N),P=K/1000,Q=10*(10-y.swipeFactor)*P*P,F={type:z.SWIPE,originEvent:H,position:M,direction:O,distance:L,distanceX:A.move[0].x-A.start[0].x,distanceY:A.move[0].y-A.start[0].y,x:A.move[0].x-A.start[0].x,y:A.move[0].y-A.start[0].y,angle:N,duration:K,fingersCount:w.getFingers(H),factor:Q};if(y.swipe){var G=function(){var R=z;switch(O){case"up":x.trigger(I,R.SWIPE_UP,F);break;case"down":x.trigger(I,R.SWIPE_DOWN,F);break;case"left":x.trigger(I,R.SWIPE_LEFT,F);break;case"right":x.trigger(I,R.SWIPE_RIGHT,F)}};a?w.isTouchMove(H)?(F.fingerStatus=F.swipe="move",x.trigger(I,z.SWIPING,F),K>y.swipeTime&&K<y.swipeTime+50&&L>y.swipeMinDistance&&(G(),x.trigger(I,z.SWIPE,F,!1))):(w.isTouchEnd(H)||"mouseout"===H.type)&&(F.fingerStatus=F.swipe="end",x.trigger(I,z.SWIPE_END,F),y.swipeTime>K&&L>y.swipeMinDistance&&(G(),x.trigger(I,z.SWIPE,F,!1))):(F.fingerStatus=F.swipe="start",a=!0,x.trigger(I,z.SWIPE_START,F))}y.drag&&(c?w.isTouchMove(H)?(F.fingerStatus=F.swipe="move",x.trigger(I,z.DRAG,F)):w.isTouchEnd(H)&&(F.fingerStatus=F.swipe="end",x.trigger(I,z.DRAGEND,F)):(F.fingerStatus=F.swipe="start",c=!0,x.trigger(I,z.DRAGSTART,F)))}},tap:function(K){var G=K.target;if(y.tap){var H=Date.now(),I=H-B,J=w.getDistance(A.start[0],A.move?A.move[0]:A.start[0]);clearTimeout(f);var F=function(){if(t&&y.doubleTap&&B-s<y.maxDoubleTapInterval){var L=w.getDistance(t,A.start[0]);if(16>L){return !0}}return !1}();if(F){return clearTimeout(j),void x.trigger(G,z.DOUBLE_TAP,{type:z.DOUBLE_TAP,originEvent:K,position:A.start[0]})}if(y.tapMaxDistance<J){return}y.holdTime>I&&w.getFingers(K)<=1&&(h=!0,s=H,t=A.start[0],j=setTimeout(function(){x.trigger(G,z.TAP,{type:z.TAP,originEvent:K,fingersCount:w.getFingers(K),position:t})},y.tapTime))}},hold:function(F){var G=F.target;y.hold&&(clearTimeout(f),f=setTimeout(function(){if(A.start){var H=w.getDistance(A.start[0],A.move?A.move[0]:A.start[0]);y.tapMaxDistance<H||h||x.trigger(G,"hold",{type:"hold",originEvent:F,fingersCount:w.getFingers(F),position:A.start[0]})}},y.holdTime))}},g=function(F){var G=F.target;switch(F.type){case"touchstart":case"mousedown":p=[],e=!0,(!A.start||A.start.length<2)&&(A.start=w.getPosOfEvent(F)),w.getFingers(F)>=2&&(q=parseInt(w.getAngle180(A.start[0],A.start[1]),10)),B=Date.now(),C=F,d={};var H=G.getBoundingClientRect(),I=document.documentElement;d={top:H.top+(window.pageYOffset||I.scrollTop)-(I.clientTop||0),left:H.left+(window.pageXOffset||I.scrollLeft)-(I.clientLeft||0)},u.hold(F);break;case"touchmove":case"mousemove":if(!e||!A.start){return}A.move=w.getPosOfEvent(F),w.getFingers(F)>=2?u.pinch(F):n?u.rotateSingleFinger(F):u.swipe(F);break;case"touchend":case"touchcancel":case"mouseup":case"mouseout":if(!e){return}E=F,b?u.pinch(F):n?u.rotateSingleFinger(F):a?u.swipe(F):u.tap(F),w.reset(),q=0,r=0,F.touches&&1===F.touches.length&&(e=!0,n=!0)}},i=function(){function M(Q){w.hasTouch||(Q=w.getPCevts(Q)),I.forEach(function(R){x.delegate(R,Q,G,F[Q])})}function N(Q){w.hasTouch||(Q=w.getPCevts(Q)),I.forEach(function(R){x.bind(R,Q,F[Q])})}var O,P,F,G,H=arguments;if(H.length<2||H>4){return console.error("unexpected arguments!")}var I="string"===w.getType(H[0])?document.querySelectorAll(H[0]):H[0];if(I=I.length?Array.prototype.slice.call(I):[I],3===H.length&&"string"===w.getType(H[1])){return O=H[1].split(" "),P=H[2],void O.forEach(function(Q){w.hasTouch||(Q=w.getPCevts(Q)),I.forEach(function(R){x.bind(R,Q,P)})})}if(3!==H.length||"object"!==w.getType(H[1])){if(2!==H.length||"object"!==w.getType(H[1])){if(4===H.length&&"object"===w.getType(H[2])){return O=H[1].split(" "),P=H[3],void O.forEach(function(Q){w.hasTouch||(Q=w.getPCevts(Q)),I.forEach(function(R){x.bind(R,Q,P)})})}if(4===H.length){var J=I[0];return O=H[1].split(" "),G=H[2],P=H[3],void O.forEach(function(Q){w.hasTouch||(Q=w.getPCevts(Q)),x.delegate(J,Q,G,P)})}}else{F=H[1];for(var K in F){N(K)}}}else{F=H[1],G=H[2];for(var L in F){M(L)}}},k=function(){var F,G,H=arguments;if(H.length<1||H.length>4){return console.error("unexpected arguments!")}var I="string"===w.getType(H[0])?document.querySelectorAll(H[0]):H[0];if(I=I.length?Array.prototype.slice.call(I):[I],1===H.length||2===H.length){return void I.forEach(function(K){F=H[1]?H[1].split(" "):Object.keys(K.listeners),F.length&&F.forEach(function(L){w.hasTouch||(L=w.getPCevts(L)),x.unbind(K,L),x.undelegate(K,L)})})}if(3===H.length&&"function"===w.getType(H[2])){return G=H[2],void I.forEach(function(K){F=H[1].split(" "),F.forEach(function(L){w.hasTouch||(L=w.getPCevts(L)),x.unbind(K,L,G)})})}if(3===H.length&&"string"===w.getType(H[2])){var J=H[2];return void I.forEach(function(K){F=H[1].split(" "),F.forEach(function(L){w.hasTouch||(L=w.getPCevts(L)),x.undelegate(K,L,J)})})}return 4===H.length?(G=H[3],void I.forEach(function(K){F=H[1].split(" "),F.forEach(function(L){w.hasTouch||(L=w.getPCevts(L)),x.undelegate(K,L,J,G)})})):void 0},m=function(F,G,H){var I=arguments;w.hasTouch||(G=w.getPCevts(G));var J="string"===w.getType(I[0])?document.querySelectorAll(I[0]):I[0];J=J.length?Array.prototype.call(J):[J],J.forEach(function(K){x.trigger(K,G,H)})};v();var o={};return o.on=o.bind=o.live=i,o.off=o.unbind=o.die=k,o.config=y,o.trigger=m,o});