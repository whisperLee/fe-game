<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no">
    <link href="../css/game.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../css/judge.css" rel="stylesheet" type="text/css" media="screen" />
    <title>法官</title>
    <style>

        /*.user-list{position: fixed; top:0}*/
        /*.user-list li{position: relative; width:25%; float:left; opacity: 1;}*/
    </style>
</head>
<body>
<div class="main" id="judge"  v-cloak>
    <!--入座二维码 begin-->
    <div class="dyCode">
        <div class="inner">
            <h2></h2>
            <div id="code">
                <canvas id="canvas"></canvas>
            </div>
            <p>扫描二维码入座游戏</p>
            <h3></h3>
        </div>
    </div>
    <!--入座二维码 end-->
    <div class="game" :nightFlag="screenCenterMessage.nightFlag">
        <h2 v-if="queueFlow <= 2" class="readyTitle">{{readyMess}}</h2>
        <ul class="user-list">
            <li v-for="(user,idx) in users" v-on:click="userClick(user,$event)" :userid="user.userId">
                <user v-bind:user="user"></user>
            </li>
        </ul>
        <!--     <ul class="user-list" style="height: auto;"><li userid="101" class="left" style="width: 75px; height: 75px; opacity: 1; left: 0px; top: 300px;"><div num="1" class="user"><div class="level level1"><div class="userInner"><div class="head"><img src="../image/head.png"></div><i class="star star2"></i><div class="num num1"><b>1</b></div><div class="status"><b class="state campaign" style="display: none;"></b><b class="state sergeant" style="display: none;"></b><b class="state SURVIVAL" style=""></b></div></div></div></div></li><li userid="2" class="left" style="width: 75px; height: 75px; opacity: 1; left: 0px; top: 225px;"><div num="2" class="user"><div class="level level0"><div class="userInner"><div class="head"><img src="../image/head.png"></div><i class="star star0"></i><div class="num num2"><b>2</b></div><div class="status"><b class="state campaign" style="display: none;"></b><b class="state sergeant" style="display: none;"></b><b class="state undefined" style="display: none;"></b></div></div></div></div></li><li userid="3" class="left" style="width: 75px; height: 75px; opacity: 1; left: 0px; top: 150px;"><div num="3" class="user"><div class="level level0"><div class="userInner"><div class="head"><img src="../image/head.png"></div><i class="star star0"></i><div class="num num3"><b>3</b></div><div class="status"><b class="state campaign" style="display: none;"></b><b class="state sergeant" style="display: none;"></b><b class="state undefined" style="display: none;"></b></div></div></div></div></li><li userid="4" class="left" style="width: 75px; height: 75px; opacity: 1; left: 0px; top: 75px;"><div num="4" class="user"><div class="level level0"><div class="userInner"><div class="head"><img src="../image/head.png"></div><i class="star star0"></i><div class="num num4"><b>4</b></div><div class="status"><b class="state campaign" style="display: none;"></b><b class="state sergeant" style="display: none;"></b><b class="state undefined" style="display: none;"></b></div></div></div></div></li><li userid="5" class="left" style="width: 75px; height: 75px; opacity: 1; left: 0px; top: 0px;"><div num="5" class="user"><div class="level level0"><div class="userInner"><div class="head"><img src="../image/head.png"></div><i class="star star0"></i><div class="num num5"><b>5</b></div><div class="status"><b class="state campaign" style="display: none;"></b><b class="state sergeant" style="display: none;"></b><b class="state undefined" style="display: none;"></b></div></div></div></div></li><li userid="6" class="center" style="width: 75px; height: 75px; opacity: 1; left: 100px; top: 0px;"><div num="6" class="user"><div class="level level0"><div class="userInner"><div class="head"><img src="../image/head.png"></div><i class="star star0"></i><div class="num num6"><b>6</b></div><div class="status"><b class="state campaign" style="display: none;"></b><b class="state sergeant" style="display: none;"></b><b class="state undefined" style="display: none;"></b></div></div></div></div></li><li userid="7" class="center" style="width: 75px; height: 75px; opacity: 1; left: 200px; top: 0px;"><div num="7" class="user"><div class="level level0"><div class="userInner"><div class="head"><img src="../image/head.png"></div><i class="star star0"></i><div class="num num7"><b>7</b></div><div class="status"><b class="state campaign" style="display: none;"></b><b class="state sergeant" style="display: none;"></b><b class="state undefined" style="display: none;"></b></div></div></div></div></li><li userid="8" class="right" style="width: 75px; height: 75px; opacity: 1; left: 300px; top: 0px;"><div num="8" class="user"><div class="level level0"><div class="userInner"><div class="head"><img src="../image/head.png"></div><i class="star star0"></i><div class="num num8"><b>8</b></div><div class="status"><b class="state campaign" style="display: none;"></b><b class="state sergeant" style="display: none;"></b><b class="state undefined" style="display: none;"></b></div></div></div></div></li><li userid="9" class="right" style="width: 75px; height: 75px; opacity: 1; left: 300px; top: 75px;"><div num="9" class="user"><div class="level level0"><div class="userInner"><div class="head"><img src="../image/head.png"></div><i class="star star0"></i><div class="num num9"><b>9</b></div><div class="status"><b class="state campaign" style="display: none;"></b><b class="state sergeant" style="display: none;"></b><b class="state undefined" style="display: none;"></b></div></div></div></div></li><li userid="10" class="right" style="width: 75px; height: 75px; opacity: 1; left: 300px; top: 150px;"><div num="10" class="user"><div class="level level0"><div class="userInner"><div class="head"><img src="../image/head.png"></div><i class="star star0"></i><div class="num num10"><b>10</b></div><div class="status"><b class="state campaign" style="display: none;"></b><b class="state sergeant" style="display: none;"></b><b class="state undefined" style="display: none;"></b></div></div></div></div></li><li userid="11" class="right" style="width: 75px; height: 75px; opacity: 1; left: 300px; top: 225px;"><div num="11" class="user"><div class="level level0"><div class="userInner"><div class="head"><img src="../image/head.png"></div><i class="star star0"></i><div class="num num11"><b>11</b></div><div class="status"><b class="state campaign" style="display: none;"></b><b class="state sergeant" style="display: none;"></b><b class="state undefined" style="display: none;"></b></div></div></div></div></li><li userid="12" class="right" style="width: 75px; height: 75px; opacity: 1; left: 300px; top: 300px;"><div num="12" class="user"><div class="level level0"><div class="userInner"><div class="head"><img src="../image/head.png"></div><i class="star star0"></i><div class="num num12"><b>12</b></div><div class="status"><b class="state campaign" style="display: none;"></b><b class="state sergeant" style="display: none;"></b><b class="state undefined" style="display: none;"></b></div></div></div></div></li></ul> -->
        <div class="queueBtns" style="display: none" v-show="queueFlow >= 1 && queueFlow < 3">
            <a class="btn"  v-on:click="quitSeat">退出座位</a>
            <a class="btn" style="display: none" v-show="leaderFlag"  v-on:click="modifyGameSet">修改配置</a>
            <a class="btn js-start" style="display: none" v-show="queueFlow >= 2 && leaderFlag" v-on:click="startGame">开始游戏</a>
        </div>
        <div class="messageCenter">
            <div class="top" style="display: none" v-show="screenCenterMessage.gameTime>0">第<span>{{ screenCenterMessage.gameTime }}</span>天<span  v-show="screenCenterMessage.nightFlag">黑天</span><span  v-show="!screenCenterMessage.nightFlag">白天</span></div>
            <div class="dialog status" style="display: none" v-show="screenCenterMessage.gameStatusStr && screenCenterMessage.gameStatusStr!=``">
                <div class="name">系统：</div>
                <div class="message">{{ screenCenterMessage.gameStatusStr }}</div>
            </div>
            <div class="dialog result" style="display: none" v-show="screenCenterMessage.result && screenCenterMessage.result!=``">
                <div class="name">法官：</div>
                <div class="message">{{ screenCenterMessage.result }}</div>
            </div>
            <div class="btn btn2 voteResult" v-on:click="showVoteResult">查看上一次投票结果</div>
        </div>
    </div>


    <div class="mine" style="display: none" v-show="personalInfo.identityId">
        <usermine class="userBack" v-bind:user="personalInfo"></usermine>
        <div class="userBtns" v-on:click="userBtntoggle">
            <a class="identity" v-on:click="showSF"></a>
            <a v-for="(btn,idx) in leaderButton" class="leaderBtn" v-bind:event="btn" v-on:click="eventForPersonalButton($event,idx,'leader')"></a>
            <a v-for="(btn,idx) in personalButton" class="personBtn" v-bind:event="btn" v-on:click="eventForPersonalButton($event,idx,'person')" ></a>
        </div>
    </div>
    <!--抢身份-->
    <div class="qiang">
        <div class="inner">
            <h2 class="title"></h2>
            <div class="countDown">倒计时:<span></span></div>
            <ul class="shenfens">
            </ul>
        </div>
    </div>
    <!--查看身份-->
    <div class="layer layerShenfen">
        <div class="inner">
            <h2 class="title">长按身份牌查看您的身份</h2>
            <div :class="`content shenfen shenfen${personalInfo.identityId}`" :old="personalInfo.oldIdentityId">
                <p class="lover" v-if="personalInfo.loverNumber">{{personalInfo.loverNumber}}</p>
            </div>
            <div class="btnWrap"><a class="btn btn2">知道了</a></div>
        </div>
    </div>

    <!--用户事件通知-->
    <div class="layer layerEventKnow">
        <div class="inner">
            <h2 class="title"></h2>
            <div class="content">
                <p class="info"></p>
                <div class="btnWrap">
                    <div class="btn btn2 js-affirm">知道了</div>
                </div>
            </div>
        </div>
    </div>
    <!-- 投票结果-->
    <div class="layer layerEventVoteResult">
        <div class="inner">
            <h2 class="title">投票结果</h2>
            <div class="content">
                <p class="info"></p>
                <ul class="resultList">
                </ul>
            </div>
            <div class="btnWrap"><div class="btn btn2 js-affirm">知道了</div></div>
        </div>
    </div>
    <!--决定事件-->
    <div class="layer layerEventDecide">
        <div class="inner">
            <h2 class="title"></h2>
            <div class="content">
                <p class="info"></p>
                <div class="btnWrap twoCol">
                    <div class="btn btn3 js-withdraw" type='no' >放弃</div>
                    <div class="btn btn2 js-affirm" type='yes'>竞选</div>
                </div>
            </div>
        </div>
    </div>
    <!--用户事件-选择-->
    <div class="layer layerSixCenter layerEventChoose">
        <div class="inner">
            <h2 class="title"></h2>
            <div class="content">
                <p class="info"></p>
                <ul class="voteList"></ul>
                <p class="tips">请长按提交按钮进行提交</p>
                <div class="btnWrap">
                    <div class="btn btn2 longPress js-longPress">
                        <span class="process"><b></b></span>
                        <span class="text">提交</span>
                    </div>
                    <div class="btn btn3 js-withdraw" >放弃</div>
                </div>
            </div>
        </div>
    </div>
    <!--用户事件-女巫-->
    <div class="layer layerSixCenter layerEventWitch">
        <div class="inner">
            <h2 class="title">女巫</h2>
            <div class="content">
                <p class="info"></p>
                <ul class="voteList">
                    <li class="unchoose"></li>
                </ul>
                <p class="tips">请长按救人/毒人按钮进行提交</p>
                <div class="btnWrap">
                    <div class="btn btn2 longPress" event="EVENT_SAVE">
                        <span class="process"><b></b></span>
                        <span class="text">救人</span>
                    </div>
                    <div class="btn btn4 longPress" event="EVENT_POISON">
                        <span class="process"><b></b></span>
                        <span class="text">毒人</span>
                    </div>
                    <div class="btn btn3 js-withdraw" event="EVENT_WITCH">放弃</div>
                </div>
            </div>
        </div>
    </div>
    <!--用户事件-盗贼选牌-->
    <div class="layer layerEventRobber">
        <div class="inner">
            <h2 class="title"></h2>
            <div class="content">
                <p class="info"></p>
                <ul class="voteList">
                </ul>
                <p class="tips">请长按提交按钮进行提交</p>
                <div class="btnWrap">
                    <div class="btn btn2 longPress js-longPress">
                        <span class="process"><b></b></span>
                        <span class="text">提交</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--查看用户详情-->
    <div class="layer layerUserInfo" v-if="JSON.stringify(userinfo)!='{}'">
        <div class="inner">
            <userinfo v-bind:user="userinfo"></userinfo>
            <div class="btnWrap">
                <a class="btn btn2" v-on:click="addAtten">关注</a>
            </div>
        </div>
    </div>
    <!--用户死亡-->
    <div class="layer layerDead">
        <div class="content">
        </div>
    </div>
    <div class="gameEnd" >
        <div class="endInner">
            <p class="resultInfo"><span class="costTime">{{accountInfo.costTime}}</span><span class="endTime">{{accountInfo.endTime}}</span></p>
            <div class="result win">
                <h3 class="title"><span>{{accountInfo.gameStatusStr}}</span></h3>
                <ul class="userList">
                    <li v-for="(user,idx) in accountInfo.winUsers" v-on:click="voteMvp($event)" :userid="user.userId" class="zan">
                        <userwin v-bind:user="user"></userwin>
                        <p>
                            <span>{{user.identityName}}</span>
                            <b v-if="user.oldIdentityName">({{user.oldIdentityName}})</b>
                        </p>
                    </li>

                </ul>
            </div>
            <div class="result lose">
                <!--<h3 class="title"><span>失败</span></h3>-->
                <ul class="userList">
                    <li v-for="(user,idx) in accountInfo.loseUsers" v-on:click="mvp($event)" :userid="user.userId">
                        <userlose v-bind:user="user"></userlose>
                        <p>
                            <span>{{user.identityName}}</span>
                            <b v-if="user.oldIdentityName">({{user.oldIdentityName}})</b>
                        </p>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="layer userAccount">
        <div class="inner">
            <div :class="myAccountInfo.mvpFlag? 'mvp' : '' "></div>
            <userAccount v-bind:user="myAccountInfo"></userAccount>
            <ul class="levelChange" >
                <li>
                    <span class="left">等级：</span><div class="right"><p>{{myAccountInfo.showStage}}阶</p></div>
                </li>
                <li v-bind:class="`level${myAccountInfo.showStage || 0 }`">
                    <span class="left">星级：</span><div class="right"><b class="star" v-for="(user,idx) in myAccountInfo.showStar"></b></div>
                </li>
                <li>
                    <span class="left">积分：</span>
                    <div class="right">
                        <div class="pro">
                            <b></b>
                            <span v-bind:class="`pre bound level${myAccountInfo.thisStage || 0 }`"><i class="star" v-for="(user,idx) in myAccountInfo.thisStar"></i></span>
                            <span v-bind:class="`next bound level${myAccountInfo.nextStage || 0 }`"><i class="star" v-for="(user,idx) in myAccountInfo.nextStar"></i></span>
                            <span v-bind:class="`count ${myAccountInfo.upFlag?'addcount':'subcount'}`">{{myAccountInfo.newScore-myAccountInfo.oldScore}}分</span>
                        </div>
                        <span class="totalAccount">{{myAccountInfo.showScore}}分</span></div>
                </li>

            </ul>
        </div>
    </div>
    <div class="judgeBtns">
        <a class="btn speakEnd" v-on:click="receiveJudgeEvent('SPEAK_END')">发言结束</a>
        <a class="btn pause" v-on:click="receiveJudgeEvent('EVENT_PAUSE')">暂停</a>
        <a class="btn continue" v-on:click="receiveJudgeEvent('EVENT_CONTINUE')">继续</a>
        <a class="btn recoverNight" v-on:click="receiveJudgeEvent('EVENT_RECOVER')">重新开始晚上流程</a>
        <a class="btn kick" v-on:click="kick('EVENT_CONTINUE')">踢人</a>
        <!--<a class="btn kill" v-on:click="kill()">刀人</a>-->
        <!--<a class="btn nightEvent" v-on:click="nightEvent()">晚上事件</a>-->
        <!--<a class="btn startGame" v-on:click="startGame()">开始游戏</a>-->
        <!--<a class="btn next" v-on:click="receiveJudgeEvent('EVENT_NEXT')">下一步</a>-->
    </div>
</div>
<script type="application/javascript" src="../../js/zepto.min.js"></script>
<script type="application/javascript" src="../../js/vue.min.js"></script>
<script type="application/javascript" src="../../js/velocity.min.js"></script>
<script type="application/javascript" src="../../js/sockjs.min.js"></script>
<script type="application/javascript" src="../../js/stomp.js"></script>
<script type="application/javascript" src="../js/global.js?v1"></script>
<script type="application/javascript" src="../js/websocket.js?v1"></script>
<script type="application/javascript" src="../js/component.js?v1"></script>
<script type="application/javascript" src="../js/animate.js?v1"></script>
<script type="application/javascript" src="../js/judge.js"></script>

</body>
</html>